{{#with date}}
  <div class="date_month">
    <header>
      <div class="input-group">
        <!-- TODO two way error due to input: -->
        <input name="{{name}}" type="text" class="form-control"
               value="{{month_year}}"
               twoway="false"
               on-focus="set({ open: true })">
        <span class="input-group-addon" on-click="toggle('open')">
          <i class="icon icon-calendar"></i>
        </span>
      </div>
    </header>

    {{#if open}}
      <div class="picker">
        <div class="row">
          <div class="month col-xs-6">
            <ul>
              {{#each visible_months:m}}
                <li {{#if month == m}}class="selected"{{/if}} on-click="MONTH:{{m}}">
                  {{this}}
                </li>
              {{/each}}
            </ul>
          </div>

          <div class="year col-xs-6">
            <header class="btn-group btn-group-xs btn-group-justified">
              <a on-click="PREV" class="btn btn-default">
                <i class="icon icon-caret-left"></i>
              </a>
              <a on-click="NEXT" {{#if !can_advance_year}}disabled{{/if}} class="btn btn-default">
                <i class="icon icon-caret-right"></i>
              </a>
            </header>
            <ul>
              {{#each visible_years}}
                <li {{#if year == this}}class="selected"{{/if}} on-click="YEAR:{{this}}">
                  {{this}}
                </li>
              {{/each}}
            </ul>
          </div>
        </div>
        <footer class="text-center">
          <a class="btn btn-sm btn-default" on-click="set({ open: false })">OK</a>
          <!-- TODO revert on cancel: -->
          <a class="btn btn-sm btn-default" on-click="set({ open: false })">Cancel</a>
        </footer>
      </div>
    {{/if}}
  </div>
{{/with}}
